---
export const prerender = false;
import Layout from '../../layouts/Layout.astro';
import {SignIn, SignOut} from 'auth-astro/components';
import {getSession} from "auth-astro/server";
const session = await getSession(Astro.request);

const language = Astro.request.url.split('/')[3] || 'es'; // Obtener el idioma de la URL
console.log(language); // Aquí puedes usar el idioma obtenido de la URL


/* const language = Astro.params.lang; */
console.log(session?.user); // Aquí puedes usar la información del usuario autenticado
const isLoggedIn = !!session;
---
<Layout
  title="Ivan Rodriguez Rojas FrontEnd Developer"
  defaultLanguage={language}
>

<section class="grid grid-cols-1 items-center justify-center gap-4 w-auto pt-6 lg:pt-16">
    <h1 class="text-2xl font-bold text-center" transition:name="labelAboutx">Servicios</h1>
    
    <nav class="flex flex-col lg:flex lg:flex-row items-center space-x-5">
        {
          isLoggedIn ?(
            <small>Bienvenido {session.user?.email} </small><img src={session.user?.image} alt={session.user?.name} class="w-8 h-8 rounded-full" />
            <SignOut>Cerrar sesión</SignOut>
          ): (
          <SignIn provider={"google"}>Iniciar con Google </SignIn>
          <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjYyIiB2aWV3Qm94PSIwIDAgMjU2IDI2MiI+PHBhdGggZmlsbD0iIzQyODVmNCIgZD0iTTI1NS44NzggMTMzLjQ1MWMwLTEwLjczNC0uODcxLTE4LjU2Ny0yLjc1Ni0yNi42OUgxMzAuNTV2NDguNDQ4aDcxLjk0N2MtMS40NSAxMi4wNC05LjI4MyAzMC4xNzItMjYuNjkgNDIuMzU2bC0uMjQ0IDEuNjIybDM4Ljc1NSAzMC4wMjNsMi42ODUuMjY4YzI0LjY1OS0yMi43NzQgMzguODc1LTU2LjI4MiAzOC44NzUtOTYuMDI3Ii8+PHBhdGggZmlsbD0iIzM0YTg1MyIgZD0iTTEzMC41NSAyNjEuMWMzNS4yNDggMCA2NC44MzktMTEuNjA1IDg2LjQ1My0zMS42MjJsLTQxLjE5Ni0zMS45MTNjLTExLjAyNCA3LjY4OC0yNS44MiAxMy4wNTUtNDUuMjU3IDEzLjA1NWMtMzQuNTIzIDAtNjMuODI0LTIyLjc3My03NC4yNjktNTQuMjVsLTEuNTMxLjEzbC00MC4yOTggMzEuMTg3bC0uNTI3IDEuNDY1QzM1LjM5MyAyMzEuNzk4IDc5LjQ5IDI2MS4xIDEzMC41NSAyNjEuMSIvPjxwYXRoIGZpbGw9IiNmYmJjMDUiIGQ9Ik01Ni4yODEgMTU2LjM3Yy0yLjc1Ni04LjEyMy00LjM1MS0xNi44MjctNC4zNTEtMjUuODJjMC04Ljk5NCAxLjU5NS0xNy42OTcgNC4yMDYtMjUuODJsLS4wNzMtMS43M0wxNS4yNiA3MS4zMTJsLTEuMzM1LjYzNUM1LjA3NyA4OS42NDQgMCAxMDkuNTE3IDAgMTMwLjU1czUuMDc3IDQwLjkwNSAxMy45MjUgNTguNjAyeiIvPjxwYXRoIGZpbGw9IiNlYjQzMzUiIGQ9Ik0xMzAuNTUgNTAuNDc5YzI0LjUxNCAwIDQxLjA1IDEwLjU4OSA1MC40NzkgMTkuNDM4bDM2Ljg0NC0zNS45NzRDMTk1LjI0NSAxMi45MSAxNjUuNzk4IDAgMTMwLjU1IDBDNzkuNDkgMCAzNS4zOTMgMjkuMzAxIDEzLjkyNSA3MS45NDdsNDIuMjExIDMyLjc4M2MxMC41OS0zMS40NzcgMzkuODkxLTU0LjI1MSA3NC40MTQtNTQuMjUxIi8+PC9zdmc+" alt="Iniciar con Google" class="w-6 h-6 rounded-full" />
          
          )
        }
        
        
      </nav>
</section>
{
    isLoggedIn ?(
      
      <small>Estas logueado y puedes ver esta info</small>
    ): (
    
    <small>No estas logueado y no puedes ver esta info</small>
    )
  }
</Layout>
