---
import Welcome from "../../components/Welcome.astro";
import Layout from "../../layouts/Layout.astro";
import Technology from "../../components/Technology.astro";

import Skills from "../../components/Skills.astro";

export async function getStaticPaths() {  
  return [
    {
      params: { lang: "es" },
      props: { language: "es" },
    },
     {
      params: { lang: "en" },
      props: { language: "en" },
    }, 
  ];
}

const { language } = Astro.props;


/* ESCALA DE COLORES DESDE EL MAS OSCURO HASTA ELMAS clearTimeout
#101828
#1e2939
#334155
#262f3d (footer)
*/


// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<Layout
  title="Ivan Rodriguez Rojas FrontEnd Developer"
  defaultLanguage={language}
>
  <div
    class="grid grid-cols-1 left-0 w-full bg-gray-200 dark:bg-[#1e2939] min-h-screen"
  >
    <Technology defaultLanguage={language} />

    <div class="flex items-center justify-center">
      <Skills defaultLanguage={language} />
    </div>
    <Welcome />
    <div id="about">
      <label>About whats</label>
    </div>
    <div id="contact">
      <label>Contact</label>
    </div>
    
  </div>
</Layout>

<script is:inline>

document.addEventListener("DOMContentLoaded", function () {
  const defLang = localStorage.getItem("language") || "es";
  
  // Si ya estamos en la URL correcta, no redirigir
  if (!window.location.pathname.startsWith(`/${defLang}`)) {
    window.location.href = `/${defLang}`;
  }
});

const changeLanguage = (lang) => {
   localStorage.setItem("language", lang);
  window.location.href = `/${lang}`;  
   /* console.log(`el lenguaje seleccionado es ${lang}`)  */
};
 document
      .getElementById("language-icon-es")
      .addEventListener("click", (e) => {
        changeLanguage( e.currentTarget.getAttribute("data-language"));
      
      });
    document
      .getElementById("language-icon-en")
      .addEventListener("click", (e) => {
        changeLanguage( e.currentTarget.getAttribute("data-language"));
      });
</script>
